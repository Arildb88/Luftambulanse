
@using Gruppe4NLA.Models
@model ReportModelWrapper
@* This tells the view it will receive and bind to a single Report object *@

@{
    
    ViewData["Title"] = "Add Report"; 
    ViewData["ShowNavbar"] = false;
    ViewData["ShowFooter"] = false;
    @* Sets the page title *@
}

<h2><br>Add a new Report</h2>

@if (ViewBag.Message != null)
{
    <p style="color:green">@ViewBag.Message</p>
}

@* Form that posts data to the Create action in ReportsController *@

<br>
<form asp-action="CreatePopUp" method="post">
    
    @* Adding spacing and changing the style *@
    <style>
        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .form-group label {
            width: 100px;
            margin-right: 10px;
            margin-left: 10px;
            text-align: left;
        }

        .form-group input,
        .form-group textarea{
            flex: 1; 
            padding: 5px;
        }

        .form-group input[type="checkbox"] {
            flex: 0;
            margin-left: 10px;
            transform: scale(2.5);
            cursor: pointer;
        }
    </style>

    @* Sender name input *@
    <div class="form-group">
        <label asp-for="NewReport.SenderName">Sender</label>

        <!-- Vises som tekst, men kan ikke redigeres -->
        <input asp-for="NewReport.SenderName"
               class="form-control-plaintext"
               readonly
               tabindex="-1"
               onfocus="this.blur()"
               style="user-select: none; color: var(--text-color);" />

        <!-- Skjult felt som sendes til backend -->
        <input type="hidden" asp-for="NewReport.SenderName" />

        <span asp-validation-for="NewReport.SenderName" class="text-danger"></span>
    </div>


    @* Latitude input *@
    <div class="form-group">
        <label asp-for="NewReport.Latitude"></label>
        <input asp-for="NewReport.Latitude" type="text" step="any" />
        <span asp-validation-for="NewReport.Latitude" class="text-danger"></span>
    </div>

    @* Longitude input *@
    <div class="form-group">
        <label asp-for="NewReport.Longitude"></label>
        <input asp-for="NewReport.Longitude" type="text" step="any" />
        <span asp-validation-for="NewReport.Longitude" class="text-danger"></span>
    </div>

    @* HeightInnMeters input *@
    <div class="form-group">
        <label asp-for="NewReport.HeightInnMeters">Height In Meters</label>
        <input asp-for="NewReport.HeightInnMeters" class="form-control" />
        <span asp-validation-for="NewReport.HeightInnMeters" class="text-danger"></span>
    </div>

    @* Danger type input *@
    <div class="form-group">
        <label asp-for="NewReport.DangerType">Obstacle Type</label>
        <input asp-for="NewReport.DangerType" class="form-control" />
    </div>

    @* Extra details textarea *@
    <div class="form-group">
        <label asp-for="NewReport.Details"></label>
        <textarea asp-for="NewReport.Details" class="form-control"></textarea>
    </div>

    @* AreLighted input *@ 
    
    <div class="form-group">
       
        <label asp-for="NewReport.AreLighted">Lighted</label>
        <input asp-for="NewReport.AreLighted" type="checkbox" />
    </div>



    @* Save and Cancel buttons *@
    <div class="d-flex justify-content-center gap-3 mt-3">
        <button type="submit" class="btnSubmit">Save</button>
    </div>
    @*<a asp-action="Index" class="btn btn-secondary mt-3">Cancel</a>*@
</form>

@* <!-- Makes button -->
<br>
<button id="btnAdd" class="btnSimple" type="button">Open Map</button>
 *@
<!-- Title for submitted coordinates -->

@*<h3><br>Submitted Coordinates</h3>

<!-- Variable "coord" will show for each instance -->
<ul>
    @foreach (var coord in Model.SubmittedReport)
    {
        <li>
            Lat: @(coord.Latitude?.ToString("F6") ?? "N/A"),
            Lng: @(coord.Longitude?.ToString("F6") ?? "N/A")
        </li>
    }
</ul>*@
