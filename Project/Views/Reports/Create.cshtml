
@using Gruppe4NLA.Models
@model ReportModelWrapper
@* This tells the view it will receive and bind to a single Report object *@

@{
    ViewData["Title"] = "Add Report"; 
    @* Sets the page title *@
}

<h2>Add a new Report</h2>

@if (ViewBag.Message != null)
{
    <p style="color:green">@ViewBag.Message</p>
}

@* Form that posts data to the Create action in ReportsController *@

<br>
<form asp-action="Create" method="post">
    
    @* Adding spacing and changing the style *@
    <style>
        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .form-group label {
            width: 100px;
            margin-right: 10px;
            margin-left: 10px;
            text-align: left;
        }

        .form-group input,
        .form-group textarea{
            flex: 1; 
            padding: 5px;
        }

        .form-group input[type="checkbox"] {
            flex: 0;
            margin-left: 10px;
            transform: scale(2.5);
            cursor: pointer;
        }
    </style>

    @* Sender name input, gets the SenderName automaticly from the User thats logged in *@
    <div class="form-group">
        <label>Sender</label>
        <div class="form-control-plaintext">@Model.NewReport.SenderName</div>
    </div>
    
    @* Latitude input *@
    <div class="form-group">
        <label asp-for="NewReport.Latitude"></label>
        <input asp-for="NewReport.Latitude" type="text" step="any" />
        <span asp-validation-for="NewReport.Latitude" class="text-danger"></span>
    </div>

    @* Longitude input *@
    <div class="form-group">
        <label asp-for="NewReport.Longitude"></label>
        <input asp-for="NewReport.Longitude" type="text" step="any" />
        <span asp-validation-for="NewReport.Longitude" class="text-danger"></span>
    </div>

    @* HeightInnMeters input *@
    <div class="form-group">
        <label asp-for="NewReport.HeightInnMeters">Height In Meters</label>
        <input asp-for="NewReport.HeightInnMeters" class="form-control" />
        <span asp-validation-for="NewReport.HeightInnMeters" class="text-danger"></span>
    </div>

    @* Danger type input *@
    <div class="form-group">
        <label asp-for="NewReport.DangerType">Obstacle Type</label>
        <input asp-for="NewReport.DangerType" class="form-control" />
    </div>

    @* Extra details textarea *@
    <div class="form-group">
        <label asp-for="NewReport.Details"></label>
        <textarea asp-for="NewReport.Details" class="form-control"></textarea>
    </div>

    @* AreLighted input *@
    <div class="form-group">
        <label asp-for="NewReport.AreLighted">Lighted</label>
        <input asp-for="NewReport.AreLighted" type="checkbox" />
    </div>



    @* Save and Cancel buttons *@
    <button type="submit" class="btn btn-success mt-3">Save</button>
    <a asp-action="Index" class="btn btn-secondary mt-3">Cancel</a>
</form>

@* <!-- Makes button -->
<br>
<button id="btnAdd" class="btnSimple" type="button">Open Map</button>
 *@
<!-- Title for submitted coordinates -->

<h3><br>Submitted Coordinates</h3>

<!-- Variable "coord" will show for each instance -->
<ul>
    @foreach (var coord in Model.SubmittedReport)
    {
        <li>
            Lat: @(coord.Latitude?.ToString("F6") ?? "N/A"),
            Lng: @(coord.Longitude?.ToString("F6") ?? "N/A")
        </li>
    }
</ul>

